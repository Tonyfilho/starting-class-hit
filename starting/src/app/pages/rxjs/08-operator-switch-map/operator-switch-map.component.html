<header class="header">
  <h1>Operador <code>SwitchMap</code> no RxJS.</h1>
</header>

<div class="card right-align">
  <button class="home-button" routerLink="/">Go Back to Home</button>
  <button class="home-button-pdf" (click)="downloadPDF()">ğŸ“„ Download PDF</button>
</div>

<section class="container-guide" #pdfContent>
  <div class="content-wrap">

    <h2>1. O que Ã© o <code>switchMap</code>?</h2>
    <hr>
    <p>
      O <code>switchMap</code> Ã© um operador que mapeia cada valor emitido por um Observable em outro Observable,
      <strong>cancelando o anterior</strong> se um novo valor for emitido antes do anterior terminar.
    </p>

    <ul>
      <li>ğŸ”¹ Ãštil para <strong>requisiÃ§Ãµes consecutivas</strong>, mantendo apenas a mais recente.</li>
      <li>ğŸ”¹ Evita problemas de <strong>concorrÃªncia</strong> (race conditions).</li>
      <li>ğŸ”¹ Muito usado com formulÃ¡rios, buscas e eventos de input.</li>
    </ul>

    <h2>2. Exemplo PrÃ¡tico</h2>
    <hr>
    <p>Imagine um usuÃ¡rio digitando em um campo de busca, e a cada tecla Ã© feita uma requisiÃ§Ã£o:</p>

    <pre><code class="language-ts">
import {{"{"}} of, fromEvent {{"}"}} from 'rxjs';
import {{"{"}} debounceTime, map, switchMap {{"}"}} from 'rxjs/operators';
import {{"{"}} ajax {{"}"}} from 'rxjs/ajax';

const input = document.getElementById('search-box');

fromEvent(input, 'input')
  .pipe(
    debounceTime(300),
    map((event: any) => event.target.value),
    switchMap(term => ajax.getJSON(`https://api.exemplo.com/busca?q=${{"{"}}term{{"}"}}`))
  )
  .subscribe(resultado => console.log('Resultado:', resultado));
    </code></pre>

    <p><strong>ExplicaÃ§Ã£o:</strong> Se o usuÃ¡rio digita rÃ¡pido, as buscas anteriores sÃ£o canceladas automaticamente.</p>

    <h2>3. ComparaÃ§Ã£o com <code>mergeMap</code></h2>
    <hr>
    <p>Enquanto <code>mergeMap</code> mantÃ©m todas as chamadas ativas, <code>switchMap</code> sempre cancela a anterior.</p>

    <ul>
      <li><code>mergeMap</code> ğŸ‘‰ mÃºltiplas execuÃ§Ãµes simultÃ¢neas.</li>
      <li><code>switchMap</code> ğŸ‘‰ sÃ³ mantÃ©m a execuÃ§Ã£o mais recente.</li>
    </ul>

    <h2>4. Quando Usar?</h2>
    <hr>
    <ul>
      <li>âœ… Campos de pesquisa/autocomplete.</li>
      <li>âœ… RequisiÃ§Ãµes onde apenas o Ãºltimo resultado importa.</li>
      <li>âœ… SubstituiÃ§Ã£o de observÃ¡veis anteriores de forma limpa.</li>
    </ul>

    <h2>Resumo TÃ©cnico</h2>
    <hr>
    <ul>
      <li>âœ… <code>switchMap</code> mapeia e troca para um novo Observable.</li>
      <li>âœ… Cancela o Observable anterior quando um novo valor Ã© emitido.</li>
      <li>âœ… Ideal para cenÃ¡rios de entrada de usuÃ¡rio ou navegaÃ§Ã£o rÃ¡pida.</li>
    </ul>

  </div>
</section>

